جميع وظائف المشروع الحالية
من خلال قراءتي وتحليلي لأكواد المشروع، يمكنني تلخيص جميع الوظائف الموجودة حال في نظام إدارة الإجازات المرضية (SCLIVE) كما يلي:

### الوظائف العامة
الصفحة الرئيسية (home): عرض لوحة التحكم للمستخدمين المسجلين أو صفحة الترحيب للزوار.
صفحة حول النظام (about): عرض معلومات عن النظام.
التحقق من صحة الإجازات (verify): التحقق من صحة الإجازات المرضية وإجازات المرافقين عن طريق رقم الإجازة.
### وظائف المصادقة
تسجيل الدخول (login): تسجيل دخول المستخدمين إلى النظام.
تسجيل حساب جديد (register): إنشاء حساب جديد في النظام.
تسجيل الخروج (logout): تسجيل خروج المستخدمين من النظام.
تغيير كلمة المرور (password_change): تغيير كلمة مرور المستخدم.
وظائف إدارة المستخدمين
قائمة المستخدمين (user_list): عرض قائمة بجميع المستخدمين.
إنشاء مستخدم جديد (user_create): إنشاء مستخدم جديد في النظام.
تعديل مستخدم (user_edit): تعديل بيانات مستخدم موجود.
حذف مستخدم (user_delete): حذف مستخدم من النظام.
### وظائف إدارة المستشفيات
قائمة المستشفيات (hospital_list): عرض قائمة بجميع المستشفيات.
إنشاء مستشفى جديد (hospital_create): إنشاء مستشفى جديد في النظام.
تعديل مستشفى (hospital_edit): تعديل بيانات مستشفى موجود.
حذف مستشفى (hospital_delete): حذف مستشفى من النظام.
وظائف إدارة جهات العمل
قائمة جهات العمل (employer_list): عرض قائمة بجميع جهات العمل.
إنشاء جهة عمل جديدة (employer_create): إنشاء جهة عمل جديدة في النظام.
تعديل جهة عمل (employer_edit): تعديل بيانات جهة عمل موجودة.
حذف جهة عمل (employer_delete): حذف جهة عمل من النظام.
### وظائف إدارة الأطباء
قائمة الأطباء (doctor_list): عرض قائمة بجميع الأطباء.
إنشاء طبيب جديد (doctor_create): إنشاء طبيب جديد في النظام.
تعديل طبيب (doctor_edit): تعديل بيانات طبيب موجود.
حذف طبيب (doctor_delete): حذف طبيب من النظام.
البحث عن الأطباء (doctor_search_api): واجهة برمجية للبحث عن الأطباء.
### وظائف إدارة المرضى
قائمة المرضى (patient_list): عرض قائمة بجميع المرضى مع إمكانية التصفية.
تفاصيل المريض (patient_detail): عرض تفاصيل مريض محدد مع الإجازات الخاصة به.
إنشاء مريض جديد (patient_create): إنشاء مريض جديد في النظام.
تعديل مريض (patient_edit): تعديل بيانات مريض موجود.
حذف مريض (patient_delete): حذف مريض من النظام.
البحث عن المرضى (patient_search_api): واجهة برمجية للبحث عن المرضى.
### وظائف إدارة العملاء
قائمة العملاء (client_list): عرض قائمة بجميع العملاء.
تفاصيل العميل (client_detail): عرض تفاصيل عميل محدد مع الفواتير والمدفوعات الخاصة به.
إنشاء عميل جديد (client_create): إنشاء عميل جديد في النظام.
تعديل عميل (client_edit): تعديل بيانات عميل موجود.
حذف عميل (client_delete): حذف عميل من النظام.
البحث عن العملاء (client_search_api): واجهة برمجية للبحث عن العملاء.
### وظائف إدارة أسعار الإجازات
قائمة أسعار الإجازات (leave_price_list): عرض قائمة بجميع أسعار الإجازات.
إنشاء سعر إجازة جديد (leave_price_create): إنشاء سعر إجازة جديد في النظام.
تعديل سعر إجازة (leave_price_edit): تعديل بيانات سعر إجازة موجود.
حذف سعر إجازة (leave_price_delete): حذف سعر إجازة من النظام.
الحصول على سعر الإجازة (leave_price_api_get_price): واجهة برمجية للحصول على سعر الإجازة بناءً على النوع والمدة.
### وظائف إدارة الإجازات المرضية
قائمة الإجازات المرضية (sick_leave_list): عرض قائمة بجميع الإجازات المرضية مع إمكانية التصفية.
تفاصيل الإجازة المرضية (sick_leave_detail): عرض تفاصيل إجازة مرضية محددة.
إنشاء إجازة مرضية جديدة (sick_leave_create): إنشاء إجازة مرضية جديدة في النظام.
تعديل إجازة مرضية (sick_leave_edit): تعديل بيانات إجازة مرضية موجودة.
حذف إجازة مرضية (sick_leave_delete): حذف إجازة مرضية من النظام.
البحث عن الإجازات المرضية (sick_leave_search_api): واجهة برمجية للبحث عن الإجازات المرضية.
### وظائف إدارة إجازات المرافقين
قائمة إجازات المرافقين (companion_leave_list): عرض قائمة بجميع إجازات المرافقين مع إمكانية التصفية.
تفاصيل إجازة المرافق (companion_leave_detail): عرض تفاصيل إجازة مرافق محددة.
إنشاء إجازة مرافق جديدة (companion_leave_create): إنشاء إجازة مرافق جديدة في النظام.
تعديل إجازة مرافق (companion_leave_edit): تعديل بيانات إجازة مرافق موجودة.
حذف إجازة مرافق (companion_leave_delete): حذف إجازة مرافق من النظام.
البحث عن إجازات المرافقين (companion_leave_search_api): واجهة برمجية للبحث عن إجازات المرافقين.
### وظائف إدارة فواتير الإجازات
قائمة فواتير الإجازات (leave_invoice_list): عرض قائمة بجميع فواتير الإجازات مع إمكانية التصفية.
تفاصيل فاتورة الإجازة (leave_invoice_detail): عرض تفاصيل فاتورة إجازة محددة.
إنشاء فاتورة إجازة جديدة (leave_invoice_create): إنشاء فاتورة إجازة جديدة في النظام.
تعديل فاتورة إجازة (leave_invoice_edit): تعديل بيانات فاتورة إجازة موجودة.
حذف فاتورة إجازة (leave_invoice_delete): حذف فاتورة إجازة من النظام.
### وظائف إدارة المدفوعات
قائمة المدفوعات (payment_list): عرض قائمة بجميع المدفوعات مع إمكانية التصفية.
تفاصيل الدفعة (payment_detail): عرض تفاصيل دفعة محددة.
إنشاء دفعة جديدة (payment_create): إنشاء دفعة جديدة في النظام.
تعديل دفعة (payment_edit): تعديل بيانات دفعة موجودة.
حذف دفعة (payment_delete): حذف دفعة من النظام.
### وظائف التقارير
صفحة التقارير الرئيسية (report_index): عرض صفحة التقارير الرئيسية مع روابط لجميع التقارير.
تقرير الإجازات المرضية (report_sick_leaves): عرض تقرير عن الإجازات المرضية.
تقرير إجازات المرافقين (report_companion_leaves): عرض تقرير عن إجازات المرافقين.
تقرير الفواتير (report_invoices): عرض تقرير عن فواتير الإجازات.
تقرير المدفوعات (report_payments): عرض تقرير عن المدفوعات.
تقرير العملاء (report_clients): عرض تقرير عن العملاء.
### وظائف إضافية
تحديث حالة الفواتير (update_invoice_status): تحديث حالة الفواتير بناءً على المدفوعات.
حساب رصيد العميل (get_client_balance): حساب رصيد العميل (إجمالي الفواتير - إجمالي المدفوعات).
توليد أرقام فريدة (generate_unique_numbers): توليد أرقام فريدة للإجازات والفواتير والمدفوعات.
هذه هي جميع الوظائف الموجودة حال漪 في المشروع، وهي تغطي جميع جوانب إدارة الإجازات المرضية وإجازات المرافقين والفواتير والمدفوعات، بالإضافة إلى إدارة المستخدمين والمستشفيات وجهات العمل والأطباء والمرضى والعملاء.

```python
import json
import re
from datetime import datetime
from fuzzywuzzy import process
import dateparser
from camel_tools.utils import normalize_arabic
from camel_tools.tokenizers import WordTokenizer

tokenizer = WordTokenizer()

def normalize_text(text):
    text = normalize_arabic(text)
    text = re.sub(r'[\u064B-\u065F]', '', text)  # Remove Arabic diacritics
    return text.strip()

def parse_date(date_str):
    try:
        date = dateparser.parse(date_str, languages=['ar'])
        return date.strftime('%Y-%m-%d') if date else date_str
    except:
        return date_str

def extract_entities(text):
    entities = {}
    tokens = tokenizer.tokenize(text)
    
    # Simple pattern matching for key fields
    patterns = {
        'id': r'\d{9,10}',
        'date': r'\d{1,4}[\/\-]\d{1,2}[\/\-]\d{1,4}',
        'english_name': r'[A-Z][A-Z\s]+'
    }
    
    for token in tokens:
        for field, pattern in patterns.items():
            if re.fullmatch(pattern, token):
                entities[field] = token
                
    return entities

def parse_message_ai(text):
    blocks = re.split(r'\n\s*\n', text.strip())
    field_mapping = {
        'الاسم': ['الاسم', 'اسم'],
        'جهة العمل': ['جهة العمل', 'جهة العمل'],
        'رقم الهوية': ['رقم الهوية', 'هوية', 'الهوية'],
        'تاريخ الميلاد': ['تاريخ الميلاد', 'ميلاد'],
        'الوظيفة': ['الوظيفة', 'وظيفة'],
        'الجنسية': ['الجنسية', 'جنسية'],
        'المدينه': ['المدينه', 'مدينة'],
        'تاريخ الاجازة': ['تاريخ الاجازة', 'الاجازة'],
        'مستشفى': ['مستشفى'],
        'الطلبات': ['الطلبات', 'طلب']
    }

    entries = []
    
    for block in blocks:
        entry = {}
        lines = [normalize_text(line) for line in block.split('\n') if line.strip()]
        
        # Extract English name using regex
        english_names = re.findall(r'[A-Z][A-Z\s]+', block)
        if english_names:
            entry['english_name'] = english_names[-1].strip()
        
        # Process each line with AI-enhanced parsing
        for line in lines:
            if ':' in line:
                key_part, value_part = line.split(':', 1)
                key = normalize_text(key_part)
                value = normalize_text(value_part)
                
                # Fuzzy match for field names
                best_match = process.extractOne(key, field_mapping.keys())
                if best_match[1] > 80:
                    entry[best_match[0]] = value
            else:
                entities = extract_entities(line)
                for field, value in entities.items():
                    entry[field] = value
                
        # Enhanced date processing
        date_fields = ['تاريخ الميلاد', 'تاريخ الاجازة']
        for field in date_fields:
            if field in entry:
                entry[field] = parse_date(entry[field])
                
        # Handle special cases
        if 'الطلبات' not in entry:
            requests = re.findall(r'\*.*?\*', block)
            if requests:
                entry['الطلبات'] = requests[0].strip('*')
        
        entries.append(entry)
    
    return json.dumps(entries, ensure_ascii=False, indent=2)

# Example usage with the same input text
output_json_ai = parse_message_ai(input_text)
print(output_json_ai)
```