# التقارير (Reports)

يوفر النظام مجموعة من التقارير التي تساعد المستخدمين على تحليل البيانات واتخاذ القرارات. فيما يلي شرح تفصيلي لكل تقرير:

## صفحة التقارير الرئيسية

### report_index

```python
@login_required
def report_index(request):
```

هذه الوظيفة تعرض صفحة التقارير الرئيسية التي تحتوي على روابط لجميع التقارير المتاحة في النظام.

## تقرير الإجازات المرضية

### report_sick_leaves

```python
@login_required
def report_sick_leaves(request):
```

هذا التقرير يعرض إحصائيات وبيانات عن الإجازات المرضية في النظام.

#### المعلمات

- **start_date**: تاريخ البداية للتقرير (اختياري)
- **end_date**: تاريخ النهاية للتقرير (اختياري)
- **status**: حالة الإجازات (اختياري)
- **doctor**: الطبيب الذي أصدر الإجازات (اختياري)
- **hospital**: المستشفى الذي أصدرت منه الإجازات (اختياري)

#### البيانات المعروضة

- **إجمالي عدد الإجازات المرضية**: العدد الإجمالي للإجازات المرضية في الفترة المحددة.
- **إجمالي مدة الإجازات المرضية**: إجمالي عدد أيام الإجازات المرضية في الفترة المحددة.
- **متوسط مدة الإجازة المرضية**: متوسط عدد أيام الإجازة المرضية في الفترة المحددة.
- **توزيع الإجازات حسب الحالة**: عدد الإجازات المرضية لكل حالة (نشطة، ملغية، منتهية).
- **توزيع الإجازات حسب المستشفى**: عدد الإجازات المرضية لكل مستشفى.
- **توزيع الإجازات حسب الطبيب**: عدد الإجازات المرضية لكل طبيب.
- **قائمة الإجازات المرضية**: قائمة تفصيلية بجميع الإجازات المرضية في الفترة المحددة.

#### الرسوم البيانية

- **رسم بياني لعدد الإجازات المرضية حسب الشهر**: يوضح عدد الإجازات المرضية لكل شهر في الفترة المحددة.
- **رسم بياني لتوزيع الإجازات المرضية حسب المستشفى**: يوضح توزيع الإجازات المرضية على المستشفيات.
- **رسم بياني لتوزيع الإجازات المرضية حسب الطبيب**: يوضح توزيع الإجازات المرضية على الأطباء.

## تقرير إجازات المرافقين

### report_companion_leaves

```python
@login_required
def report_companion_leaves(request):
```

هذا التقرير يعرض إحصائيات وبيانات عن إجازات المرافقين في النظام.

#### المعلمات

- **start_date**: تاريخ البداية للتقرير (اختياري)
- **end_date**: تاريخ النهاية للتقرير (اختياري)
- **status**: حالة الإجازات (اختياري)
- **doctor**: الطبيب الذي أصدر الإجازات (اختياري)
- **hospital**: المستشفى الذي أصدرت منه الإجازات (اختياري)

#### البيانات المعروضة

- **إجمالي عدد إجازات المرافقين**: العدد الإجمالي لإجازات المرافقين في الفترة المحددة.
- **إجمالي مدة إجازات المرافقين**: إجمالي عدد أيام إجازات المرافقين في الفترة المحددة.
- **متوسط مدة إجازة المرافق**: متوسط عدد أيام إجازة المرافق في الفترة المحددة.
- **توزيع الإجازات حسب الحالة**: عدد إجازات المرافقين لكل حالة (نشطة، ملغية، منتهية).
- **توزيع الإجازات حسب المستشفى**: عدد إجازات المرافقين لكل مستشفى.
- **توزيع الإجازات حسب الطبيب**: عدد إجازات المرافقين لكل طبيب.
- **قائمة إجازات المرافقين**: قائمة تفصيلية بجميع إجازات المرافقين في الفترة المحددة.

#### الرسوم البيانية

- **رسم بياني لعدد إجازات المرافقين حسب الشهر**: يوضح عدد إجازات المرافقين لكل شهر في الفترة المحددة.
- **رسم بياني لتوزيع إجازات المرافقين حسب المستشفى**: يوضح توزيع إجازات المرافقين على المستشفيات.
- **رسم بياني لتوزيع إجازات المرافقين حسب الطبيب**: يوضح توزيع إجازات المرافقين على الأطباء.

## تقرير الفواتير

### report_invoices

```python
@login_required
def report_invoices(request):
```

هذا التقرير يعرض إحصائيات وبيانات عن فواتير الإجازات في النظام.

#### المعلمات

- **start_date**: تاريخ البداية للتقرير (اختياري)
- **end_date**: تاريخ النهاية للتقرير (اختياري)
- **status**: حالة الفواتير (اختياري)
- **client**: العميل الذي أصدرت له الفواتير (اختياري)
- **leave_type**: نوع الإجازة (اختياري)

#### البيانات المعروضة

- **إجمالي عدد الفواتير**: العدد الإجمالي للفواتير في الفترة المحددة.
- **إجمالي مبلغ الفواتير**: إجمالي مبلغ الفواتير في الفترة المحددة.
- **متوسط مبلغ الفاتورة**: متوسط مبلغ الفاتورة في الفترة المحددة.
- **توزيع الفواتير حسب الحالة**: عدد الفواتير لكل حالة (غير مدفوعة، مدفوعة جزئيًا، مدفوعة بالكامل، ملغية).
- **توزيع الفواتير حسب نوع الإجازة**: عدد الفواتير لكل نوع إجازة (إجازة مرضية، إجازة مرافق).
- **توزيع الفواتير حسب العميل**: عدد الفواتير لكل عميل.
- **قائمة الفواتير**: قائمة تفصيلية بجميع الفواتير في الفترة المحددة.

#### الرسوم البيانية

- **رسم بياني لعدد الفواتير حسب الشهر**: يوضح عدد الفواتير لكل شهر في الفترة المحددة.
- **رسم بياني لمبلغ الفواتير حسب الشهر**: يوضح إجمالي مبلغ الفواتير لكل شهر في الفترة المحددة.
- **رسم بياني لتوزيع الفواتير حسب الحالة**: يوضح توزيع الفواتير على الحالات المختلفة.
- **رسم بياني لتوزيع الفواتير حسب نوع الإجازة**: يوضح توزيع الفواتير على أنواع الإجازات.

## تقرير المدفوعات

### report_payments

```python
@login_required
def report_payments(request):
```

هذا التقرير يعرض إحصائيات وبيانات عن المدفوعات في النظام.

#### المعلمات

- **start_date**: تاريخ البداية للتقرير (اختياري)
- **end_date**: تاريخ النهاية للتقرير (اختياري)
- **payment_method**: طريقة الدفع (اختياري)
- **client**: العميل الذي قام بالدفع (اختياري)

#### البيانات المعروضة

- **إجمالي عدد المدفوعات**: العدد الإجمالي للمدفوعات في الفترة المحددة.
- **إجمالي مبلغ المدفوعات**: إجمالي مبلغ المدفوعات في الفترة المحددة.
- **متوسط مبلغ الدفعة**: متوسط مبلغ الدفعة في الفترة المحددة.
- **توزيع المدفوعات حسب طريقة الدفع**: عدد المدفوعات لكل طريقة دفع (نقدًا، تحويل بنكي، شيك، بطاقة ائتمان).
- **توزيع المدفوعات حسب العميل**: عدد المدفوعات لكل عميل.
- **قائمة المدفوعات**: قائمة تفصيلية بجميع المدفوعات في الفترة المحددة.

#### الرسوم البيانية

- **رسم بياني لعدد المدفوعات حسب الشهر**: يوضح عدد المدفوعات لكل شهر في الفترة المحددة.
- **رسم بياني لمبلغ المدفوعات حسب الشهر**: يوضح إجمالي مبلغ المدفوعات لكل شهر في الفترة المحددة.
- **رسم بياني لتوزيع المدفوعات حسب طريقة الدفع**: يوضح توزيع المدفوعات على طرق الدفع المختلفة.

## تقرير العملاء

### report_clients

```python
@login_required
def report_clients(request):
```

هذا التقرير يعرض إحصائيات وبيانات عن العملاء في النظام.

#### المعلمات

- **client**: العميل المحدد للتقرير (اختياري)

#### البيانات المعروضة

- **إجمالي عدد العملاء**: العدد الإجمالي للعملاء في النظام.
- **إجمالي رصيد العملاء**: إجمالي رصيد جميع العملاء (إجمالي الفواتير - إجمالي المدفوعات).
- **العملاء حسب الرصيد**: قائمة بالعملاء مرتبة حسب الرصيد (من الأعلى إلى الأدنى).
- **العملاء حسب عدد الفواتير**: قائمة بالعملاء مرتبة حسب عدد الفواتير (من الأعلى إلى الأدنى).
- **العملاء حسب إجمالي المدفوعات**: قائمة بالعملاء مرتبة حسب إجمالي المدفوعات (من الأعلى إلى الأدنى).
- **تفاصيل العميل المحدد**: إذا تم تحديد عميل، يتم عرض تفاصيل هذا العميل مع الفواتير والمدفوعات الخاصة به.

#### الرسوم البيانية

- **رسم بياني لتوزيع الرصيد بين العملاء**: يوضح توزيع الرصيد بين العملاء.
- **رسم بياني لتوزيع الفواتير بين العملاء**: يوضح توزيع الفواتير بين العملاء.
- **رسم بياني لتوزيع المدفوعات بين العملاء**: يوضح توزيع المدفوعات بين العملاء.

## ميزات مشتركة في التقارير

### تصدير البيانات

جميع التقارير توفر إمكانية تصدير البيانات بتنسيقات مختلفة:
- **Excel**: تصدير البيانات بتنسيق Excel.
- **PDF**: تصدير البيانات بتنسيق PDF.
- **CSV**: تصدير البيانات بتنسيق CSV.

### تصفية البيانات

جميع التقارير توفر إمكانية تصفية البيانات حسب معايير مختلفة، مثل:
- **الفترة الزمنية**: تحديد فترة زمنية محددة للتقرير.
- **الحالة**: تصفية البيانات حسب الحالة.
- **العميل**: تصفية البيانات حسب العميل.
- **الطبيب**: تصفية البيانات حسب الطبيب.
- **المستشفى**: تصفية البيانات حسب المستشفى.

### الرسوم البيانية التفاعلية

جميع الرسوم البيانية في التقارير تفاعلية، مما يسمح للمستخدم بالتفاعل معها والحصول على معلومات إضافية عند تمرير المؤشر فوق العناصر المختلفة.
